<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ALLSO - 聚合搜索引擎</title>
    <meta name="keywords" content="百度,搜索,聚合搜索,一起搜,ALLSO" />
    <meta name="description" content="通过ALLSO，输入一个关键字，你可以对2个搜索引擎同时展开搜索，页面一分为二，充分利用显示资源，相当的实用。" />
    <link href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="fav.ico" />
</head>

<body style="overflow:hidden">
    <!--[if lt IE 9]>
        <style>
#outdated{position:fixed;top:0;left:0;width:100%;height:170px;text-align:center;text-transform:uppercase;z-index:1500;background-color:#73A53E;color:#fff}* html #outdated{position:absolute}#outdated h6{font-size:25px;line-height:25px;margin:30px 0 10px;color:#B7FDFF}#outdated p{font-size:12px;line-height:12px;margin:0}#outdated #btnUpdateBrowser{display:block;position:relative;padding:10px 20px;margin:30px auto 0;width:230px;color:#fff;text-decoration:none;border:2px solid #fff;cursor:pointer}#outdated #btnUpdateBrowser:hover{color:#f25648;background-color:#fff}#outdated .last{position:absolute;top:10px;right:25px;width:20px;height:20px}#outdated #btnCloseUpdateBrowser{display:block;position:relative;width:100%;height:100%;text-decoration:none;color:#fff;font-size:36px;line-height:36px}
        </style>
        <div id="outdated">
            <h6>亲，你该升级浏览器了</h6><p>使用现代化的浏览器，才能够完美地渲染出各种页面，并拥有最快的加载速度<a id="btnUpdateBrowser" href="http://mydown.yesky.com/zhuanti/llq1307" target="_blank" rel="nofollow">现在升级</a></p><p class="last"><a href="#" onclick="document.getElementById('outdated').style.display='none'" id="btnCloseUpdateBrowser" title="关闭">&times;</a></p>
        </div>
    <![endif]-->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div style='width:100%' class="container-fluid row">
            <div class="navbar-header"> <a class="navbar-brand" href="http://hzy.pw/allso"><strong>&nbsp;ALLSO 聚合搜索引擎</strong></a> </div>
            <div class="collapse navbar-collapse">
                <!-- 搜索框 -->
                <form class="navbar-form navbar-right" onsubmit="return false;">
                    <div class="form-group">
                        <input name='s' type="text" class="form-control" id='soinput' style='width:500px' placeholder="中原驿站 http://hzy.pw">
                    </div>
                    <button onclick='so();' type="submit" class="btn btn-primary" id='sobut'>ALLSO 一下！</button>
                </form>
                <!-- 左边按钮 -->
                <ul class="nav navbar-nav navbar-left">
                    <li><a href="#" data-toggle="modal" data-target="#set">搜索设置</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">关于 <span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="http://hzy.pw/p/1389" target='_blank'>ALLSO 由 Moshel 开发</a></li>
                            <li><a href="http://hzy.pw" target='_blank'>点击来访我的个人网站</a></li>
                            <li class="divider"></li>
                            <li><a href="#">真好用，我要分享给朋友：</a></li>
                            <li>
                                <center>
                                    <div class="bshare-custom icon-medium"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到微信" class="bshare-weixin"></a><a title="分享到收藏夹" class="bshare-favorite"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a></div>
                                    <script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/button.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><a class="bshareDiv" onclick="javascript:return false;"></a>
                                    <script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
                                </center>
                            </li>
                            <li class="divider"></li>
                            <li><a href="http://hzy.pw/liuyanban" target='_blank'>我有更好的意见需要反馈</a></li>
                        </ul>
                    </li>
                </ul>
                <!-- 进度条 -->
                <div class="progress" style='  margin-top: 15px;'>
                    <div id='jdt1' class="progress-bar progress-bar-info" style="width: 38%"></div>
                    <div id='jdt2' class="progress-bar progress-bar-success" style="width: 24%"></div>
                </div>
            </div>
        </div>
    </nav>
    <iframe style='width:49%;border:0;padding:0;z-index:2; position:absolute;top:0;left:0' id='a' class="0" src="http://hzy.pw"></iframe>
    <iframe style='width:49%;border:0;padding:0;z-index:1; position:absolute;top:0;left:0' id='b' class="1" src="http://www.2345.com/?kzyyz"></iframe>

    <div class="modal fade" id='set'>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">搜索设置</h4>
                </div>
                <div class="modal-body">
                    <table class="table table-hover set-list">
                        <tr><th>一号搜索引擎</th><th>二号搜索引擎</th></tr>
                        <tr>
                            <td class="set-list-1">
                                <button type="button" class="btn btn-info" onclick="set(0,1)">百度</button>&nbsp;
                                <button type="button" class="btn btn-info" onclick="set(0,2)">好搜</button>&nbsp;
                                <button type="button" class="btn btn-info" onclick="set(0,3)">必应</button>&nbsp;
                                <button type="button" class="btn btn-info" onclick="set(0,4)">谷歌</button>
                            </td>
                            <td class="set-list-2">
                                <button type="button" class="btn btn-warning" onclick="set(1,1)">百度</button>&nbsp;
                                <button type="button" class="btn btn-warning" onclick="set(1,2)">好搜</button>&nbsp;
                                <button type="button" class="btn btn-warning" onclick="set(1,3)">必应</button>&nbsp;
                                <button type="button" class="btn btn-warning" onclick="set(1,4)">谷歌</button>
                            </td>
                        </tr>
                    </table>
                    <div class="alert alert-success" role="alert" style="margin-bottom: 10px">ALLSO 使用了黑科技，让大家无需翻墙即可使用 Google，欢迎体验！</div>
					<button type="button" class="btn btn-default center-block" id="change_single_mode" style="width:61.8%" onclick="change_single_mode()">切换为单搜索引擎模式</button>
                    <div class="alert alert-danger" role="alert" style="display:none" id="change_mode_fail"><a target="_blank" href="http://hzy.pw/p/1389" style="color:#000;text-decoration:none"><strong>无法切换</strong><br><br>因为开发 ALLSO 的初衷就是制作一个聚合型浏览器，<br>双栏搜索能够充分利用屏幕空间，并且互补各搜索引擎的优势。</a></div>
                </div>
            </div>
        </div>
    </div>

    <!-- cnzz -->
    <div style='display:none'>
        <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://"); document.write(unescape("%3Cspan id='cnzz_stat_icon_5009343'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/stat.php%3Fid%3D5009343%26online%3D2' type='text/javascript'%3E%3C/script%3E"));</script>
    </div>

</body>

<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<script>
    if ($(window).width() < 770) {
        alert("ALLSO 是一个聚合性搜索引擎，可以同时对 2 个搜索引擎展开搜索，页面一分为二，充分利用屏幕资源。\n\n然而。。。\n\n你的屏幕实在是太小了，请在电脑或平板上使用 ALLSO，相信会带给你一份相当棒的体验！\n\nhttp://hzy.pw/allso/");
        if (location.href.indexOf("so=") > -1) {
            var tmp = location.href.split('so=', 2), tmp2 = tmp[1]; tmp = tmp2.split('&', 2);
            window.location.href = "http://m.search.aol.co.uk/search?q=" + tmp[0];
        }
    }
	
    /* 设置搜索引擎 */
    var set_url = new Array(), set_top = new Array(), set_left = new Array(), set_foot = new Array();
    var need_respond = true;
    set_top[0] = 0; set_left[0] = 0; set_foot[0] = 0;
    set_top[1] = 0; set_left[1] = 0; set_foot[1] = 0;
    respond();

    if (localStorage["allso_0"] == undefined) {
        set(0, 3);
        $("td.set-list-1 > button:eq(3)").removeClass("btn-info").addClass("btn-danger");
    }
    else {
        set(0, localStorage["allso_0"]);
        $("td.set-list-1 > button:eq(" + localStorage["allso_0"] + ")").removeClass("btn-info").addClass("btn-danger");
    }
    if (localStorage["allso_1"] == undefined) {
        set(1, 1);
        $("td.set-list-2 > button:eq(1)").removeClass("btn-warning").addClass("btn-success");
    }
    else {
        set(1, localStorage["allso_1"]);
        $("td.set-list-2 > button:eq(" + localStorage["allso_1"] + ")").removeClass("btn-warning").addClass("btn-success");
    }

    function set(a0b1, set_so) {
        localStorage["allso_" + a0b1] = set_so;
        if (set_so == 0) {
            set_url[a0b1] = "http://www.baidu.com/s?wd=";
            set_top[a0b1] = -45; set_left[a0b1] = -100; set_foot[a0b1] = 80;
        }
        else if (set_so == 1) {
            set_url[a0b1] = "http://www.haosou.com/s?q=";
            set_top[a0b1] = 0; set_left[a0b1] = 0; set_foot[a0b1] = 160;
        }
        else if (set_so == 2) {
            set_url[a0b1] = "http://cn.bing.com/search?q=";
            set_top[a0b1] = -70; set_left[a0b1] = -80; set_foot[a0b1] = 125;
        }
        else if (set_so == 3) {
            set_url[a0b1] = "http://search.aol.co.uk/aol/search?q=";
            set_top[a0b1] = -70; set_left[a0b1] = -120; set_foot[a0b1] = 140;
        }
        need_respond = true;
    }

    $("td.set-list-1 > button").click(function () {
        $('td.set-list-1 > button').removeClass("btn-danger").addClass("btn-info");
        $(this).removeClass("btn-info").addClass("btn-danger");
        set(0, $(this).index());
    });
    $("td.set-list-2 > button").click(function () {
        $('td.set-list-2 > button').removeClass("btn-success").addClass("btn-warning");
        $(this).removeClass("btn-warning").addClass("btn-success");
        set(1, $(this).index());
    });

    /* 响应get */
    if (location.href.indexOf("so=") > -1) {
        var tmp = location.href.split('so=', 2), tmp2 = tmp[1];
        tmp = tmp2.split('&', 2); tmp2 = decodeURIComponent(tmp[0]).replace(/\+/g, ' ');
        $('#soinput')[0].value = tmp2;
        so();
    }

    /* 响应式 */
    $(window).resize(function () { respond(); });
    function respond() {
        var winh = $(window).height(), navh = $("nav.navbar").height(), abx = $(window).width() / 2;

        $('#a').animate({ "margin-top": set_top[0] + navh, "margin-left": set_left[0], width: abx - set_left[0], height: winh - set_top[0] - navh + set_foot[0] }, 'fast');
        $('#b').animate({ "margin-top": set_top[1] + navh, "margin-left": abx + set_left[1], width: abx - set_left[1], height: winh - set_top[1] - navh + set_foot[1] }, 'fast');

        need_respond = false;
    }

    /* 搜索按钮事件 */
    if (window.navigator.userAgent.indexOf("Chrome") > 0)
        $('#soinput').attr('oninput', 'so();');
    function so() {
        if ($.trim($('#soinput')[0].value) != '') {
            var sowhat_str = $('#soinput')[0].value, sowhat = encodeURIComponent(sowhat_str);
            $('#a')[0].src = set_url[0] + sowhat;
            $('#b')[0].src = set_url[1] + sowhat;
            window.document.title = sowhat_str + ' - ALLSO';
        }
        else
            window.document.title = 'ALLSO - 聚合搜索引擎';

        if (need_respond)
            respond();

        var rndw = Math.ceil(Math.random() * 97) + 1; /* 2~98  */
        var objProgress = $('div.progress>div');
        objProgress.addClass('progress-bar-striped active');
        objProgress[0].style.width = rndw + '%';
        objProgress[1].style.width = 100 - rndw + '%';
        window.setTimeout(function () {
            objProgress.removeClass('progress-bar-striped active');
        }, 2000);
    }
	
	/*切换为单搜索引擎模式按钮*/
	function change_single_mode(){
		$("#change_single_mode").fadeOut(300);
		window.setTimeout(function(){
			$("#change_mode_fail").fadeIn(1000);
		},300);
	}
</script>
</html>
